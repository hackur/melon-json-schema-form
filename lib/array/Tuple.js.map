{"version":3,"sources":["array/Tuple.js"],"names":["ArrayTupleItem","args","onFieldChange","bind","shouldComponentUpdate","nextProps","props","e","target","value","onChange","index","type","render","level","schema","defaultValue","name","Field","ArrayTuple","tuple","state","slice","pointer","items","title","titleClassName","map","item","recordPointer","displayName","propTypes","array","object","number","func","isRequired","defaultProps","Array","isArray"],"mappings":"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","file":"array/Tuple.js","sourcesContent":["/**\n * @file Tulpe\n * @author leon <ludafa@outlook.com>\n */\n\nimport React, {Component, PropTypes} from 'react';\nimport InputComponent from 'melon-core/InputComponent';\nimport {createClassName} from 'melon-core/classname/classname';\nimport {registerComponent, getComponent} from '../factory';\nimport resolveDefaults from '../util/resolveDefaults';\nimport shallowEqual from 'melon-core/util/shallowEqual';\n\nexport class ArrayTupleItem extends Component {\n\n    constructor(...args) {\n        super(...args);\n        this.onFieldChange = this.onFieldChange.bind(this);\n    }\n\n    shouldComponentUpdate(nextProps) {\n        return !shallowEqual(this.props, nextProps);\n    }\n\n    onFieldChange(e) {\n\n        const {\n            target,\n            value\n        } = e;\n\n        const {\n            onChange,\n            index\n        } = this.props;\n\n        onChange({\n            type: 'change',\n            target,\n            value,\n            index\n        });\n\n    }\n\n    render() {\n\n        const {\n            level,\n            schema,\n            value,\n            defaultValue,\n            name,\n            Field\n        } = this.props;\n\n\n        return (\n            <Field\n                level={level}\n                schema={schema}\n                value={value}\n                defaultValue={defaultValue}\n                name={name}\n                onChange={this.onFieldChange} />\n        );\n\n    }\n\n}\n\nexport default class ArrayTuple extends InputComponent {\n\n    constructor(...args) {\n        super(...args);\n        this.onFieldChange = this.onFieldChange.bind(this);\n    }\n\n    onFieldChange(e) {\n\n        const tuple = this.state.value;\n\n        const {\n            index,\n            value\n        } = e;\n\n        this.onChange({\n            target: this,\n            value: [\n                ...tuple.slice(0, index),\n                value,\n                ...tuple.slice(index + 1)\n            ]\n        });\n\n    }\n\n    render() {\n\n        const {props, pointer} = this;\n\n        const {\n            schema,\n            value = [],\n            level\n        } = props;\n\n        const {items, title} = schema;\n\n        const titleClassName = createClassName(\n            'ui-field-array-title',\n            'ui-field-title',\n            `variant-level-${level}`\n        );\n\n        return (\n            <fieldset className=\"ui-field ui-field-array variant-tuple\">\n                <header className={titleClassName}>\n                    {title}\n                </header>\n                <ol className=\"ui-field-content\">\n                    {items.map((item, index) => {\n\n                        const Field = getComponent(item);\n\n                        if (!Field) {\n                            return null;\n                        }\n\n                        const recordPointer = `${pointer}/${index}`;\n\n                        return (\n                            <li key={recordPointer}>\n                                <ArrayTupleItem\n                                    Field={Field}\n                                    level={level + 1}\n                                    schema={item}\n                                    value={value[index]}\n                                    defaultValue={resolveDefaults(item)}\n                                    index={index}\n                                    name={index + ''}\n                                    onChange={this.onFieldChange} />\n                            </li>\n                        );\n                    })}\n                </ol>\n            </fieldset>\n        );\n\n    }\n\n}\n\nArrayTuple.displayName = 'Tuple';\n\nArrayTuple.propTypes = {\n    ...InputComponent.propTypes,\n    value: PropTypes.array,\n    schema: PropTypes.object,\n    level: PropTypes.number,\n    onChange: PropTypes.func.isRequired\n};\n\nArrayTuple.defaultProps = {\n    ...InputComponent.defaultProps,\n    value: []\n};\n\nregisterComponent(function (schema) {\n\n    const {\n        type,\n        items\n    } = schema;\n\n    if (type === 'array' && Array.isArray(items)) {\n        return ArrayTuple;\n    }\n\n});\n"],"sourceRoot":"/source/"}