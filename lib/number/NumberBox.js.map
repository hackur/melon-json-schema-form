{"version":3,"sources":["number/NumberBox.js"],"names":["cx","NumberBox","props","context","value","state","isNaN","getValue","onChange","e","target","type","onBlur","onFocus","render","floatingLabel","rest","validity","isFocus","isFloating","statefulClassName","addStates","focus","floating","fulfilled","getStyleStates","build","renderFloatingLabel","input","findDOMNode","displayName","defaultProps"],"mappings":"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","file":"number/NumberBox.js","sourcesContent":["/**\n * @file NumberBox\n * @author leon <ludafa@outlook.com>\n */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport TextBox from 'melon/TextBox';\nimport TextBoxInput from 'melon/textbox/Input';\nimport Validity from 'melon-core/Validity';\nimport {create} from 'melon-core/classname/cxBuilder';\n\nconst cx = create('TextBox');\n\nexport default class NumberBox extends TextBox {\n\n    constructor(props, context) {\n        super(props, context);\n        const value = this.state.value;\n        this.state.value = value === '' || isNaN(+value) ? '' : +value;\n    }\n\n    getValue() {\n        const value = this.state.value;\n        return value === '' ? '' : +value;\n    }\n\n    /**\n     * 值改变时处理\n     *\n     * @protected\n     * @param  {Object} e 事件对象\n     */\n    onChange(e) {\n\n        const value = e.target.value;\n\n        super.onChange({\n            type: 'change',\n            target: {\n                value: value === '' ? '' : +value\n            }\n        });\n\n    }\n\n    onBlur(e) {\n\n        const value = e.target.value;\n\n        super.onBlur({\n            type: 'change',\n            target: {\n                value: value === '' ? '' : +value\n            }\n        });\n\n    }\n\n    onFocus(e) {\n\n        const value = e.target.value;\n\n        super.onFocus({\n            type: 'change',\n            target: {\n                value: value === '' ? '' : +value\n            }\n        });\n\n    }\n\n    render() {\n\n        const {\n            onFocus,\n            onBlur,\n            onChange,\n            props\n        } = this;\n\n        const {\n            floatingLabel,\n            ...rest\n        } = props;\n\n        const {\n            validity,\n            isFocus,\n            isFloating,\n            value\n        } = this.state;\n\n        const statefulClassName = cx(props)\n            .addStates({\n                focus: isFocus,\n                floating: isFloating,\n                fulfilled: !!value\n            })\n            .addStates(this.getStyleStates())\n            .build();\n\n        return (\n            <div className={statefulClassName}>\n                {this.renderFloatingLabel(floatingLabel, isFloating, isFocus)}\n                <TextBoxInput\n                    {...rest}\n                    type=\"number\"\n                    onFocus={onFocus}\n                    onBlur={onBlur}\n                    onChange={onChange}\n                    isFocus={isFocus}\n                    value={value + ''}\n                    ref={input => {\n                        if (input) {\n                            this.input = ReactDOM.findDOMNode(input);\n                        }\n                    }} />\n                <Validity validity={validity} />\n            </div>\n        );\n    }\n\n}\n\nNumberBox.displayName = 'NumberBox';\n\nNumberBox.defaultProps = TextBox.defaultProps;\n"],"sourceRoot":"/source/"}